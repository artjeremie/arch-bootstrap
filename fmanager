#!/bin/sh
# https://github.com/hoaxdream
# author: hoaxdream
USER=$(whoami)

# cp and mv progress
int_coreutil()
  {
    cd ~/.config/work
    wget http://ftp.gnu.org/gnu/coreutils/coreutils-9.0.tar.xz
    tar xvJf coreutils-9.0.tar.xz
    cd coreutils-9.0/
    wget https://raw.githubusercontent.com/jarun/advcpmv/master/advcpmv-0.9-9.0.patch
    patch -p1 -i advcpmv-0.9-9.0.patch
    ./configure
    make
    sudo mv ./src/cp /usr/local/bin/cpg
    sudo mv ./src/mv /usr/local/bin/mvg
  }
# nnn
int_nnn()
  {
    cd ~/.config/nnn
    make O_NERD=1 && sudo make install
  }
# fix alias
int_fixalias()
  {
    sed -i 's/cp="cp"/cp="cpg -g"/g' ~/.config/zsh/aliasrc
    sed -i 's/mv="mv"/mv="mvg -g"/g' ~/.config/zsh/aliasrc
  }
# mpd user daemon
int_mpd()
  {
    systemctl --user enable mpd
  }
# cron
int_cron()
  {
    mkdir ~/.config/cron
    cp ~/.config/work/backups/cronsaved ~/.config/cron/cronsaved
  }
# set transmission user, change User to your username
int_transmission()
  {
    sudo sed -i 's/root/'"$USER"'/g' /usr/lib/systemd/system/transmission.service
  }
# picom
int_picom()
  {
    sudo cp /home/$USER/.config/work/backups/picom.conf /etc/xdg/picom.conf
  }
# Chown /media
int_chown()
  {
    sudo chown -R $USER:$USER /media/core/
    sudo chown -R $USER:$USER /media/data/
  }
# cleanup
int_cleanup()
  {
    rm /home/$USER/.bash_logout
    rm /home/$USER/.bash_profile
    rm /home/$USER/.bashrc
    rm /home/$USER/.zshrc
    rm -rf /home/$USER/Desktop
    rm -rf /home/$USER/Documents
    rm -rf /home/$USER/Downloads
    rm -rf /home/$USER/Music
    rm -rf /home/$USER/Pictures
    rm -rf /home/$USER/Public
    rm -rf /home/$USER/Templates
    rm -rf /home/$USER/Videos
    mv /home/$USER/.cargo /home/$USER/.local/share/cargo
    mv /home/$USER/.gnupg/* /home/$USER/.local/share/gnupg
    mv /home/$USER/go /home/$USER/.local/share/go
    mv /home/$USER/.gradle /home/$USER/.local/share/gradle
    mv /home/$USER/.kotlin /home/$USER/.local/share/kotlin
    rm -rf /home/$USER/.gnupg
    mkdir -p /home/$USER/.local/share/mail/hoaxdream
  }

echo 'cp and mv progress'
int_coreutil
echo 'nnn file manager'
int_nnn
echo 'fix alias'
int_fixalias
echo 'mpd'
int_mpd
echo 'cron'
int_cron
echo 'torrent'
int_transmission
echo 'picom'
int_picom
echo 'chown'
int_chown
echo 'clean up'
int_cleanup
